.. _nim_viosupgrade_module:


nim_viosupgrade -- Perform an upgrade with the viosupgrade tool
===============================================================

.. contents::
   :local:
   :depth: 1


Synopsis
--------

Tool to upgrade VIOSes in NIM environment.



Requirements
------------
The below requirements are needed on the host that executes this module.

- AIX >= 7.1 TL3
- Python >= 2.7



Parameters
----------

  action (True, str, None)
    Specifies the operation to perform.

    ``altdisk_install`` to perform and alternate disk install.

    ``alt_disk_clean`` to cleanup an existing alternate disk install.

    ``get_status`` to get the status of the upgrade.


  vars (optional, dict, None)
    Specifies additional parameters.


  vios_status (optional, dict, None)
    Specifies the result of a previous operation.


  targets (optional, list, None)
    NIM targets.


  target_file_name (optional, str, None)
    File name containing NIM targets in CSV format.


  mksysb_name (optional, dict, None)
    mksysb name.


  spot_name (optional, dict, None)
    SPOT name.


  backup_file (optional, dict, None)
    Backup file name.


  rootvg_clone_disk (optional, dict, None)
    Clone disk name.


  rootvg_install_disk (optional, dict, None)
    Install disk name.


  res_resolv_conf (optional, dict, None)
    NIM resolv_conf resource name.


  res_script (optional, dict, None)
    NIM script resource name.


  res_fb_script (optional, dict, None)
    NIM fb_script resource name.


  res_file_res (optional, dict, None)
    NIM file_res resource name.


  res_image_data (optional, dict, None)
    NIM image_data resource name.


  res_log (optional, dict, None)
    NIM log resource name.


  cluster_exists (optional, dict, None)
    Check if cluster exists.


  validate_input_data (optional, dict, None)
    Validate input data.


  skip_rootvg_cloning (optional, dict, None)
    Skip rootvg cloning.









Examples
--------

.. code-block:: yaml+jinja

    
    - name: Perform an upgrade of nimvios01
      nim_viosupgrade:
        targets: nimvios01
        action: altdisk_install



Return Values
-------------

msg (always, str, )
  Status information.


targets (always, list, )
  List of VIOSes.


nim_node (always, dict, )
  NIM node info.


status (always, dict, )
  Status for each VIOS (dicionnary key).





Status
------




- This module is not guaranteed to have a backwards compatible interface. *[preview]*


- This module is maintained by community.



Authors
~~~~~~~

- AIX Development Team (@pbfinley1911)

