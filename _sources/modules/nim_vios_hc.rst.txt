.. _nim_vios_hc_module:


nim_vios_hc -- Check if a pair of VIOSes can be updated.
========================================================

.. contents::
   :local:
   :depth: 1


Synopsis
--------

Uses the Network Installation Management (NIM) and the VIOS health check tool to check several settings required to update a pair of Virtual I/O Servers (VIOS).

In the current version, it validates the vSCSI, NPIv, SEA mappings configurations and vNIC configurations (when set) so the update of the VIOS pair can be attempted. The SSP configuration is not checked yet, that is not required so far.



Requirements
------------
The below requirements are needed on the host that executes this module.

- AIX >= 7.1 TL3
- Python >= 2.7
- The **vioshc.py** script must be installed on the NIM master.



Parameters
----------

  action (True, str, None)
    Specifies the operation to perform.

    ``health_check`` to perform a health check.


  targets (True, list, None)
    Specifies the NIM clients to perform the action on.

    To perform a health check on dual VIOSes specify a tuple with the following format *"vios1,vios2"*.





Notes
-----

.. note::
   - Use the **power_aix_vioshc** role to install the required **vioshc.py** script on the NIM master.
   - The default log directory for the **vioshc.py** script is **/tmp/vios_maint**.
   - The **vioshc.py** script uses Curl to get information through the REST API of the VIOSes' HMC.




Examples
--------

.. code-block:: yaml+jinja

    
    - name: Perform a health check on dual VIOSes vios1,vios2 and on VIOS vios3
      nim_vios_hc:
        targets:
        - vios1,vios2
        - vios3
        action: health_check



Return Values
-------------

msg (always, str, )
  Status information.


targets (always, list, )
  List of VIOS tuples.


nim_node (always, dict, )
  NIM node info.


status (always, dict, )
  Status for each VIOS (dictionary key).





Status
------




- This module is not guaranteed to have a backwards compatible interface. *[preview]*


- This module is maintained by community.



Authors
~~~~~~~

- AIX Development Team (@pbfinley1911)

